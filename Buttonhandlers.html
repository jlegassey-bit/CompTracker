<script>
/**
 * ButtonHandlers.html
 * Bridges UI buttons to modals and waits until the modal functions exist.
 */

window.openCaseDetail = function(rid) {
  console.log('openCaseDetail called for:', rid);

  var checkModal = setInterval(function() {
    if (typeof window.openCaseDetailModal === 'function') {
      clearInterval(checkModal);
      window.openCaseDetailModal(rid);
    }
  }, 50);

  setTimeout(function() {
    clearInterval(checkModal);
    if (typeof window.openCaseDetailModal !== 'function') {
      console.error('Modal_CaseDetail not loaded');
      Swal.fire('Error', 'Case detail modal failed to load. Please refresh the page.', 'error');
    }
  }, 3000);
};

window.openSettingsModal = function() {
  console.log('openSettingsModal called');

  var checkModal = setInterval(function() {
    if (typeof window.openSettingsModalReal === 'function') {
      clearInterval(checkModal);
      window.openSettingsModalReal();
    }
  }, 50);

  setTimeout(function() {
    clearInterval(checkModal);
    if (typeof window.openSettingsModalReal !== 'function') {
      console.error('Modal_Settings not loaded');
      Swal.fire('Error', 'Settings modal failed to load. Please refresh the page.', 'error');
    }
  }, 3000);
};

console.log('ButtonHandlers.html loaded - openCaseDetail and openSettingsModal available');
</script>
